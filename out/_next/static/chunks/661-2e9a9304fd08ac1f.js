(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[661],{5221:function(e,a,t){"use strict";t.d(a,{h:function(){return c}});var l=t(5893),n=t(5244),r=t.n(n),o=t(1664),s=t.n(o);let c=e=>(0,l.jsx)("div",{className:r().header,children:(0,l.jsx)(s(),{href:"/",className:r().headerLink,children:"Forward-IT"})})},1831:function(e,a,t){"use strict";t.d(a,{R:function(){return o}});var l=t(5893),n=t(9795),r=t.n(n);let o=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:r().loaderWrapper,children:[(0,l.jsx)("div",{className:r().divLoader,children:(0,l.jsxs)("svg",{className:r().planeLoader,width:"64px",height:"64px",viewBox:"-4.64 -4.64 25.28 25.28",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",transform:"rotate(0)",children:[(0,l.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,l.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,l.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,l.jsx)("path",{d:"m 6.496094 1 c -0.792969 0 -0.78125 0.035156 -0.53125 1.03125 l 1.625 4.96875 h -4.5 l -1.21875 -1.78125 c -0.140625 -0.207031 -0.121094 -0.21875 -0.34375 -0.21875 h -0.21875 c -0.425782 0 -0.28125 0.4375 -0.28125 0.4375 l 0.28125 2.5625 l -0.28125 2.5625 s -0.140625 0.4375 0.25 0.4375 h 0.25 c 0.210937 0 0.203125 -0.007812 0.34375 -0.21875 l 1.21875 -1.78125 h 4.5 l -1.625 4.9375 c -0.261719 1.046875 -0.265625 1.0625 0.53125 1.0625 c 0.433594 0 0.433594 -0.011719 0.71875 -0.5 l 3.6875 -5.5 h 3.09375 c 0.554687 0 1 -0.445312 1 -1 s -0.445313 -1 -1 -1 h -3.09375 l -3.6875 -5.5 c -0.265625 -0.457031 -0.28125 -0.5 -0.65625 -0.5 z m 0 0",fill:"#002596"})," "]})]})}),(0,l.jsx)("h1",{className:r().loadingText,children:"Загрузка данных..."})]})})},4309:function(e,a,t){"use strict";t.d(a,{l:function(){return y}});var l=t(5893),n=t(7294),r=t(7131),o=t(9592),s=t.n(o),c=t(9281);let i=e=>{let a=e.from,t=e.to;return"Москва"===a?a="Москвы":"Астрахань"===a&&(a="Астрахани"),"Москва"===t&&(t="Москву"),(0,l.jsx)(c.Z,{in:e.showAlert,timeout:300,classNames:"bounce",unmountOnExit:!0,children:(0,l.jsx)("div",{className:s().changeDirectionBox,children:(0,l.jsx)("p",{className:s().changeDirectionText,children:"К сожалению, самолета из ".concat(a," в ").concat(t," нет...")})})})},d=e=>{let a=e.options;return(0,l.jsxs)("div",{className:e.className,children:[(0,l.jsx)(i,{from:e.fromDirection,to:e.toDirection,showAlert:e.showAlert}),(0,l.jsx)("p",{className:e.textClass,children:e.upText}),(0,l.jsx)(r.ZP,{blurInputOnSelect:!1,menuPosition:"fixed",classNamePrefix:"react-select",isSearchable:e.isSearchable,options:a,id:e.id,onChange:e.onChange,placeholder:e.placeholder,name:e.name,styles:{control:e=>({...e,width:"180px",boxShadow:"none",borderRadius:"16px",border:"1px solid #D0D0D0",paddingLeft:"7px",height:"40px",fontSize:"16px","&:hover":{border:"1px solid #0B0023"}}),input:e=>({...e,margin:0,padding:0,height:"100%"}),placeholder:e=>({...e,margin:0,padding:0,fontSize:"15px"}),valueContainer:e=>({...e,display:"flex",padding:0,paddingLeft:"8px",alignItems:"center",height:"40px"}),menu:e=>({...e,width:"180px",borderRadius:"16px"}),menuList:e=>({...e,width:"180px",padding:0,borderRadius:"16px"}),option:e=>({...e,padding:"12px 16px"}),group:e=>({...e,padding:0})},required:!0})]})},h=e=>{let a=[];for(let t=0;t<e.length;t++)a[t]={value:e[t].label,label:e[t].name};return a};var p=JSON.parse('[{"name":"Сочи","label":"AER"},{"name":"Москва","label":"SVO"},{"name":"Астрахань","label":"ASF"}]'),u=JSON.parse('[{"name":"Сочи","label":"AER"},{"name":"Москва","label":"SVO"},{"name":"Астрахань","label":"ASF"}]'),_=t(9198),m=t.n(_);t(459);var x=t(1806);(0,_.registerLocale)("ru",x.Z);let g=e=>(0,l.jsxs)("div",{className:e.className,children:[(0,l.jsx)("p",{className:s().textClass,children:e.upText}),(0,l.jsx)(m(),{locale:"ru",placeholderText:e.placeholder,peekNextMonth:!0,minDate:e.minDate,maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:e.showYearDropdown,dropdownMode:"select",dateFormat:"dd.MM.yyyy",selected:e.selected,onChange:e.onChange})]});var b=JSON.parse('[{"name":"1 месяц","label":"1"},{"name":"2 месяца","label":"2"},{"name":"3 месяцa","label":"3"},{"name":"4 месяца","label":"4"},{"name":"5 месяцев","label":"5"},{"name":"6 месяцев","label":"6"},{"name":"7 месяцев","label":"7"},{"name":"8 месяцев","label":"8"},{"name":"9 месяцев","label":"9"},{"name":"10 месяцев","label":"10"},{"name":"11 месяцев","label":"11"},{"name":"12 месяцев","label":"12"}]'),f=t(475);let v=async(e,a,t,l,n,r,o)=>{let s;let c=await fetch("".concat(e,"class-history-filter?startDate=").concat(a,"&period=").concat(t,"&seg_class_code=").concat(l,"&sorg=").concat(n,"&sdst=").concat(r,"&flt_num=").concat(o),{headers:{"Content-type":"application/json",Accept:"application/json"},method:"GET"}),i=await c.json();return console.log(i),c.ok?s=!0:console.log("There is a trouble on the server..."),[i,s]};var C=t(1163);let T=async(e,a,t,l,n,r,o)=>{let s;let c=await fetch("".concat(e,"startDate=").concat(a,"&period=").concat(t,"&seg_class_code=").concat(l,"&sorg=").concat(n,"&sdst=").concat(r,"&flt_num=").concat(o),{headers:{"Content-type":"application/json",Accept:"application/json"},method:"GET"}),i=await c.json();return console.log(i),c.ok?s=!0:console.log("There is a trouble on the server..."),[i,s]},D=e=>{let a=[];for(let t=0;t<e.length;t++)a[t]={value:e[t],label:e[t]};return a},w=async(e,a,t,l,n,r,o)=>{let s;let c=await fetch("".concat(e,"startDate=").concat(a,"&period=").concat(t,"&seg_class_code=").concat(l,"&sorg=").concat(n,"&sdst=").concat(r,"&flt_num=").concat(o),{headers:{"Content-type":"application/json",Accept:"application/json"},method:"GET"}),i=await c.json();return console.log(i),c.ok?s=!0:console.log("There is a trouble on the server..."),[i,s]},N=(e,a)=>{if(e.value===a.value)return console.log(e.value,a.value),!0},j=(e,a)=>{let t=[];for(let l=0;l<e.length;l++)t[l]=(0,f.j1)(e[l][a]);return t},S=(e,a)=>{let t=[];for(let l=0;l<e.length;l++)t[l]=parseInt(e[l][a]);return t},I=async(e,a,t,l)=>{let n=await fetch("".concat(e,"seg_class_code=").concat(a,"&sorg=").concat(t,"&sdst=").concat(l),{headers:{"Content-type":"application/json",Accept:"application/json"},method:"GET"}),r=await n.json();return console.log(r),r};var k=JSON.parse('[{"label":"Economy Class","options":[{"label":"Y","value":"Y"},{"label":"B","value":"B"},{"label":"H","value":"H"},{"label":"K","value":"K"},{"label":"L","value":"L"},{"label":"M","value":"M"},{"label":"N","value":"N"},{"label":"Q","value":"Q"},{"label":"T","value":"T"},{"label":"V","value":"V"},{"label":"G","value":"G"},{"label":"X","value":"X"},{"label":"E","value":"E"},{"label":"U","value":"U"}]},{"label":"Business Class","options":[{"label":"I","value":"I"},{"label":"D","value":"D"},{"label":"Z","value":"Z"},{"label":"C","value":"C"},{"label":"J","value":"J"}]},{"label":"First Class","options":[{"label":"P","value":"P"},{"label":"R","value":"R"}]}]');let y=e=>{let[a,t]=(0,n.useState)(),[r,o]=(0,n.useState)(null),[c,i]=(0,n.useState)(null),[_,m]=(0,n.useState)(null),[x,y]=(0,n.useState)(null),[A,E]=(0,n.useState)(null),[F,L]=(0,n.useState)(!1),[W,R]=(0,n.useState)(null),P=(0,C.useRouter)();return(0,n.useEffect)(()=>{if(_&&x&&c){let e=async()=>{let e=await I("https://api.forward-it.ru/api/get-flt-num-by-class-code?",c.value,_.value,x.value);R(D(e))};e()}},[_,x,c]),(0,n.useEffect)(()=>{if(_&&x&&(N(x,_)?L(!0):L(!1)),c&&a&&r&&x&&_){if(e.dataPicked(!1),(c||a||r||x||_)&&(e.setLoader(!0),e.unmountTable(!1),e.setNoInfo(!1)),"/dynamicTable"===P.pathname){let t=0,l=async()=>{let l=await v("https://api.forward-it.ru/api/",(0,f.F5)(a.toLocaleDateString()),r.value,c.value,_.value,x.value,parseInt(A.value));for(let e=0;e<l[0].data.length;e++)0===l[0].data[e].PRED_DEMAND&&t++;(0===l[0].data.length||t>1e3)&&e.setNoInfo(!0),!0===l[1]&&(e.unmountTable(!0),e.setLoader(!1)),console.log(l[0].data),e.setData((0,f.I9)(l[0].data,"SDAT_S","PRED_DEMAND"))};l()}else if("/predictTable"===P.pathname){let t=0,l=async()=>{let l=await T("https://api.forward-it.ru/api/finaly-predictions-filter?",(0,f.F5)(a.toLocaleDateString()),r.value,c.value,_.value,x.value,parseInt(A.value));for(let e=0;e<l[0].data.length;e++)0===l[0].data[e].PRED_DEMAND&&t++;(0===l[0].data.length||t>300)&&e.setNoInfo(!0),!0===l[1]&&(e.unmountTable(!0),e.setLoader(!1)),e.getAllDates(j(l[0].data,"CAPTURE_DATE1")),e.getAllData(S(l[0].data,"PRED_DEMAND")),e.setData((0,f.I9)(l[0].data,"CAPTURE_DATE1","PRED_DEMAND"))};l()}else if("/seasonTable"===P.pathname){let t=0,l=async()=>{let l=await w("https://api.forward-it.ru/api/seasonality-filter?",(0,f.F5)(a.toLocaleDateString()),r.value,c.value,_.value,x.value,parseInt(A.value));for(let e=0;e<l[0].length;e++)0===l[0][e].trend_route_7d_rolling&&t++;(0===l[0].length||t>300)&&e.setNoInfo(!0),!0===l[1]&&(e.unmountTable(!0),e.setLoader(!1)),console.log(l[0]),e.setData((0,f.I9)(l[0],"CAPTURE_DATE1","trend_route_7d_rolling"))};l()}}},[c,a,r,x,_,A]),(0,l.jsxs)("div",{className:s().menuWrapper,children:[(0,l.jsx)(d,{className:s().selectWrapper,textClass:s().textClass,upText:"Откуда?",isSearchable:!1,onChange:e=>{m(e)},options:h(p),id:"directionSelect",placeholder:"Направление...",name:"directionSelect"}),(0,l.jsx)(d,{fromDirection:_&&_.label,toDirection:x&&x.label,className:s().selectWrapper,showAlert:F,textClass:s().textClass,upText:"Куда?",isSearchable:!1,onChange:e=>{y(e)},options:h(u),id:"toDirectionSelect",placeholder:"Направление...",name:"toDirectionSelect"}),(0,l.jsx)(d,{textClass:s().textClass,className:s().selectWrapper,upText:"Класс бронирования",onChange:e=>{i(e)},isSearchable:!1,options:k,id:"directionSelect",placeholder:"Класс...",name:"directionSelect"}),(0,l.jsx)(d,{textClass:s().textClass,upText:"Номер рейса",onChange:e=>{E(e)},isSearchable:!1,options:W,className:s().selectWrapper,id:"fltNumSelect",placeholder:"Номер рейса...",name:"fltNumSelect"}),(0,l.jsx)(g,{upText:"Датa",selected:a,onChange:e=>{t(e)},showYearDropdown:"/dynamicTable"===P.pathname,maxDate:new Date("/dynamicTable"===P.pathname?"12.31.2019":"12.31.2020"),minDate:new Date("/dynamicTable"===P.pathname?"01.01.2018":"01.01.2020"),placeholder:"Выбрать дату"}),(0,l.jsx)(d,{className:s().selectWrapper,onChange:e=>{o(e)},textClass:s().textClass,upText:"Период",isSearchable:!1,options:h(b),id:"directionSelect",placeholder:"Период...",name:"directionSelect"})]})}},9195:function(e,a,t){"use strict";t.d(a,{t:function(){return o}});var l=t(5893),n=t(7046),r=t.n(n);t(7294);let o=e=>(0,l.jsx)("div",{className:r().toggleWrapper,children:(0,l.jsxs)("div",{className:r().buttonTableDiv,children:[(0,l.jsx)("p",{className:r().chartsTableDesc,children:"Вы можете выбрать тип графика"}),(0,l.jsxs)("div",{className:r().chartsCheckBox,children:[(0,l.jsx)("p",{className:r().toggleCheckboxText,children:"Линейчатый"}),(0,l.jsx)("input",{type:"checkbox",id:"check",className:r().toggleCheckbox,onChange:a=>{a.target.checked?e.setTypeOfChart("bar"):e.setTypeOfChart("line")}}),(0,l.jsx)("label",{htmlFor:"check"}),(0,l.jsx)("p",{className:r().toggleCheckboxText,children:"Столбчатый"})]})]})})},475:function(e,a,t){"use strict";t.d(a,{F5:function(){return n},I9:function(){return o},j1:function(){return r},vc:function(){return s}});let l=e=>{let a=[...e.keys()],t={labels:a,datasets:[{label:"Данные",borderColor:"#da291c",borderWidth:2,fill:"start",backgroundColor:"hsla(225, 100%, 29%, 0.4)",data:[...e.values()],tension:.4}]};return t},n=e=>{let a=e.slice(0,2),t=e.slice(3,5),l=e.slice(6,10);return"".concat(l,"-").concat(t,"-").concat(a)},r=e=>{let a=e.slice(8,10),t=e.slice(5,7),l=e.slice(0,4);return"".concat(a,".").concat(t,".").concat(l)},o=(e,a,t)=>{let n=new Map;for(let l=0;l<e.length;l++)n.get(e[l][a])||n.set(r(e[l][a]),parseInt(e[l][t]));let o=l(n);return o},s={bezierCurve:"true",responsive:!0,plugins:{title:{display:!0,text:"Динамика бронирования классов"}}}},5244:function(e){e.exports={headerIcon:"Header_headerIcon__oKov8",header:"Header_header__VYZ3G",rightHeader:"Header_rightHeader__l2Il6",headerLink:"Header_headerLink__dWwU2"}},9795:function(e){e.exports={mobileTextWrapper:"Charts_mobileTextWrapper__n6X8i",chartsTable:"Charts_chartsTable__B547_",chartsTableDynamic:"Charts_chartsTableDynamic__PW_nO",dynamicLoaderWrapper:"Charts_dynamicLoaderWrapper__i3NVV",loaderWrapper:"Charts_loaderWrapper__QcIK6",loadingText:"Charts_loadingText__NSJuc",dynamicLoader:"Charts_dynamicLoader__IW_Wf",showAlertText:"Charts_showAlertText__mp99k",showAlertSubText:"Charts_showAlertSubText__II_nU",divLoader:"Charts_divLoader__e3XNa",rotatePlane:"Charts_rotatePlane__hWnQb",planeLoader:"Charts_planeLoader__vwjpa"}},9592:function(e){e.exports={menuWrapper:"Form_menuWrapper__vA1Fb",textClass:"Form_textClass__8wv_V",linksBox:"Form_linksBox__R9Kxf",linkInitial:"Form_linkInitial__kC_0W",initialTableWrapper:"Form_initialTableWrapper__zsFJx",formTitle:"Form_formTitle__NaXS1",formDescription:"Form_formDescription__2eBQG",react_datepicker:"Form_react_datepicker__woflO",hideCalendar:"Form_hideCalendar__PIMwK",formInput:"Form_formInput__COwL2",menuInput:"Form_menuInput__CwH42",changeDirectionBox:"Form_changeDirectionBox__I6Y1Y",changeDirectionText:"Form_changeDirectionText__KIfNH",selectWrapper:"Form_selectWrapper__Z6eco",chartChangeLeftItem:"Form_chartChangeLeftItem__epVmU",chartChangeRightItem:"Form_chartChangeRightItem__zIQDG"}},7046:function(e){e.exports={buttonTableDiv:"Toggle_buttonTableDiv__xKp8s",toggleCheckboxText:"Toggle_toggleCheckboxText__fcV4F",chartsTableDesc:"Toggle_chartsTableDesc__7_dIJ",chartsCheckBox:"Toggle_chartsCheckBox__29TNu",toggleCheckbox:"Toggle_toggleCheckbox__aC9T_"}}}]);